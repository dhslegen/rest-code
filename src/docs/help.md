## 操作指南

### 界面介绍

- **文件加载**：用于打开已有的 `.rcs` 脚本文件。
- **生成代码**：配置生成代码的相关参数，如输出路径、包名等。
- **领域编辑**：编辑领域名称和描述，领域是业务模块的划分。
- **脚本编辑**：编辑 API 脚本，包括操作名称、请求方法、参数契约等。
- **脚本查看**：实时查看生成的 `.rcs` 脚本内容。
- **帮助**：查看帮助文档，了解工具的使用方法和脚本格式。

### 基本操作

1. **添加领域**：
   - 在领域编辑区域，点击`新增领域`按钮。
   - 输入领域名称和描述。

2. **添加脚本**：
   - 在脚本编辑区域，点击`新增脚本`按钮。
   - 选择领域名称和内置模板，模板会自动填充脚本内容。
   - 根据需要修改脚本的各个部分。

3. **一键 CRUD**：
   - 在脚本编辑区域，点击`一键 CRUD`按钮。
   - 选择需要生成 CRUD 脚本的领域，自动添加常用的增删改查脚本。

4. **校验脚本**：
   - 在脚本查看区域，点击`校验`按钮。
   - 检查脚本的格式和内容，提示可能的错误和重复。

5. **保存脚本**：
   - 在脚本查看区域，点击“保存”按钮。
   - 将编辑好的 `.rcs` 脚本保存到文件。

6. **生成代码**：
   - 在生成代码区域，配置框架基本包名、源码输出路径、源码基本包名等参数。
   - 点击“生成代码”按钮，生成后端代码。

7. **预览代码**：
   - 在生成代码区域，点击“预览”按钮。
   - 查看生成的代码内容，检查是否符合预期。

### 脚本编写注意事项

- **领域名称**：应为大写字母开头的驼峰命名，如 `User`。
- **操作名称**：应为小写字母开头的驼峰命名，如 `createUser`。
- **参数契约**：根据 API 的需求，正确使用 `@、?、#、$、>` 等前缀符。
- **避免重复**：同一领域下，操作名称和参数契约的组合不能重复。

## Rcs 文件格式

Rcs（`Rest Code Script`）文件是一种专门为`Rest Code`设计的脚本文件，用于描述 REST API 的领域模型和操作。它通过简洁的语法规则，定义了领域声明和 API 操作，进而帮助生成符合业务逻辑的 API 控制器代码。

Rcs 文件分为两部分：**Domain 声明** 和 **API 脚本**。

1. **Domain 声明**：文件的头部由若干行 `Domain声明` 组成，每个声明由 `/` 开头，并由 `/` 分割，用于定义领域名称和领域描述。`Domain 声明` 与内置模板结合使用，以辅助用户快速输入 `API 脚本`。

2. **API 脚本**：文件的主体由若干行 `API 脚本` 组成，每个脚本元素通过 `.` 分割，用于描述 API 操作，包括请求方法、路径、参数和描述等。每个 `API 脚本` 将生成对应的 `Spring Boot Rest Controller` 代码。

### Domain 声明格式

**格式**：`/领域名称/领域描述`

- 领域名称是 API 所属的业务模块名称，如 `User`。
- 领域描述则是对该模块的简单说明，如 `用户。

**示例**：

```text
/User/用户
/Order/订单
```

### API 脚本格式

**格式**：`领域名称.HTTP请求方法.API路径（可为空）.操作名称（方法名称）.参数契约（可为空）.描述`

- 领域名称：与 Domain 声明中的领域名称一致。
- HTTP 请求方法：如 `GET`、`POST`、`PUT`、`DELETE` 等。
- API 路径：可以为空，若不为空，则指定 API 的路径。
- 操作名称：即生成的控制器中对应方法的名称。
- 参数契约：定义请求体、查询参数和路径参数的格式，支持多种参数类型。
- 描述：对 API 操作的简要说明。

**示例**：

```text
User.POST..create.@.新增用户
Order.GET./{id}.get.#id.获取订单详情
```

### 参数契约格式

`参数契约` 是 `API 脚本` 中用于描述请求和响应参数的部分。契约的格式为：`@xxx?yyy#num$str>zzz`，其中 `@、?、#、$、>` 是特殊的前缀符，分别表示不同类型的请求和响应参数。

1. `@`：表示 `@RequestBody` 请求参数，通常用于 JSON 请求体。  
   - `@` 表示单个对象，例如：`@RequestBody @Valid UserReqVo reqVo`。
   - `@=` 表示对象列表，例如：`@RequestBody @Valid List<UserReqVo> reqVos`。

2. `?`：表示 `Query` 查询参数，通常用于 `GET` 请求的查询条件。  
   - 示例：`UserQueryVo queryVo`。

3. `#`：表示 `@PathVariable` 数值型路径参数。  
   - 示例：`@PathVariable("id") long id`。

4. `$`：表示 `@PathVariable` 字符串型路径参数。  
   - 示例：`@PathVariable("orgCode") String orgCode`。

5. `>`：表示 `@ResponseBody` 响应报文。  
   - `>` 表示返回单个对象，例如：`@ResponseBody Result<UserRespVo>`。
   - `>=` 表示返回对象列表，例如：`@ResponseBody Result<List<UserRespVo>>`。
   - `><` 表示返回树形结构，例如：`@ResponseBody Result<TreeNode<Long, UserTreeVo>>`。
   - `>+` 表示返回分页对象，例如：`@ResponseBody Result<Page<UserRespVo>>`。
   - 不存在 `>` 前缀符时，表示返回空对象，例如：`@ResponseBody Result<Void>`。

所有片段都是可选的，可以根据实际需求选择 0 个或多个，并且顺序也没有严格要求。各片段中的 `xxx、yyy、num、str、zzz` 代表具体的业务含义，需要遵循驼峰命名法，确保清晰易读。它们会拼接到`领域名称`和`Vo后缀`之间，如：`update` 会转为`UserUpdateReqVo`。